"use strict";(self.webpackChunkCouponsProjectTomerPart3BNew=self.webpackChunkCouponsProjectTomerPart3BNew||[]).push([[348],{1348:(R,f,l)=>{l.r(f),l.d(f,{LoginModule:()=>b});var a=l(1083),e=l(5e3),d=l(6290),m=l(3075),v=l(6256),C=l(7613),h=l(5243),g=l(9808),u=l(8966),c=l(7322),F=l(4107),T=l(508),Z=l(7531),x=l(7423);function y(t,o){if(1&t&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.Q6J("value",n.value),e.xp6(1),e.hij(" ",n.viewValue," ")}}function A(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"This field is mandatory."),e.qZA())}function I(t,o){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,A,2,0,"span",7),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==n.elementForm.controls||null==n.elementForm.controls.clientType||null==n.elementForm.controls.clientType.errors?null:n.elementForm.controls.clientType.errors.required)}}function S(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"This field is mandatory."),e.qZA())}function N(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"This field is invalid."),e.qZA())}function J(t,o){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,S,2,0,"span",7),e.YNc(2,N,2,0,"span",7),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==n.elementForm.controls||null==n.elementForm.controls.email||null==n.elementForm.controls.email.errors?null:n.elementForm.controls.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.elementForm.controls||null==n.elementForm.controls.email||null==n.elementForm.controls.email.errors?null:n.elementForm.controls.email.errors.email)}}function _(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"This field is mandatory."),e.qZA())}function O(t,o){if(1&t&&(e.TgZ(0,"mat-error"),e.YNc(1,_,2,0,"span",7),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==n.elementForm.controls||null==n.elementForm.controls.password||null==n.elementForm.controls.password.errors?null:n.elementForm.controls.password.errors.required)}}function U(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){e.CHM(n);const s=e.oxw();return s.login(s.elementForm.value.email,s.elementForm.value.password,s.elementForm.value.clientType)}),e.TgZ(1,"div",2)(2,"h2",3),e._uU(3,"Login"),e.qZA(),e.TgZ(4,"mat-dialog-content")(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Client Type"),e.qZA(),e.TgZ(8,"mat-select",5),e.YNc(9,y,2,2,"mat-option",6),e.qZA(),e.YNc(10,I,2,1,"mat-error",7),e.qZA(),e._UZ(11,"br"),e.TgZ(12,"mat-form-field",4)(13,"mat-label"),e._uU(14,"Email"),e.qZA(),e._UZ(15,"input",8),e.YNc(16,J,3,2,"mat-error",7),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"mat-form-field",4)(19,"mat-label"),e._uU(20,"Password"),e.qZA(),e._UZ(21,"input",9),e.YNc(22,O,2,1,"mat-error",7),e.qZA()(),e.TgZ(23,"mat-dialog-actions")(24,"button",10),e._uU(25,"Login"),e.qZA()(),e.TgZ(26,"mat-error")(27,"span"),e._uU(28),e.qZA()()()()}if(2&t){const n=e.oxw();e.Q6J("formGroup",n.elementForm),e.xp6(9),e.Q6J("ngForOf",n.clients),e.xp6(1),e.Q6J("ngIf",(null==n.elementForm.controls||null==n.elementForm.controls.clientType?null:n.elementForm.controls.clientType.touched)&&(null==n.elementForm.controls||null==n.elementForm.controls.clientType?null:n.elementForm.controls.clientType.invalid)),e.xp6(6),e.Q6J("ngIf",(null==n.elementForm.controls||null==n.elementForm.controls.email?null:n.elementForm.controls.email.touched)&&(null==n.elementForm.controls||null==n.elementForm.controls.email?null:n.elementForm.controls.email.invalid)),e.xp6(6),e.Q6J("ngIf",(null==n.elementForm.controls||null==n.elementForm.controls.password?null:n.elementForm.controls.password.touched)&&(null==n.elementForm.controls||null==n.elementForm.controls.password?null:n.elementForm.controls.password.invalid)),e.xp6(2),e.Q6J("disabled",n.elementForm.invalid),e.xp6(4),e.Oqu(n.error)}}let Y=(()=>{class t{constructor(n,r,s,i,p){this.authService=n,this.formBuilder=r,this.router=s,this.companyService=i,this.customerService=p,this.clients=[{value:"ADMINISTRATOR",viewValue:"Admin"},{value:"COMPANY",viewValue:"Company"},{value:"CUSTOMER",viewValue:"Customer"}]}ngOnInit(){this.isAuth$=this.authService.isAuth$,this.elementForm=this.formBuilder.group({clientType:["",[m.kI.required]],email:["",[m.kI.required,m.kI.email]],password:["",[m.kI.required]]})}login(n,r,s){this.authService.login(n,r,s).subscribe({next:i=>{sessionStorage.setItem("cookie",i.toString()),this.router.navigate([this.navigate(s)]),sessionStorage.setItem("isAuth","true"),this.isAuth$.next(!0),this.initClient(s)},error:i=>{let p=JSON.parse(i.error);this.error=p.message},complete:()=>{this.error=null}})}navigate(n){let r="/admin";switch(n){case"COMPANY":r="/company";break;case"CUSTOMER":r="/customer"}return r}initClient(n){"ADMINISTRATOR"===n?sessionStorage.setItem("client","admin"):"COMPANY"===n?this.companyService.getCompanyDetails().subscribe({next:r=>{sessionStorage.setItem("client",JSON.stringify(r))}}):"CUSTOMER"===n&&this.customerService.getCustomerDetails().subscribe({next:r=>{sessionStorage.setItem("client",JSON.stringify(r))}})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(v.e),e.Y36(m.qu),e.Y36(a.F0),e.Y36(C.J),e.Y36(h.v))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-content"]],decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"container"],["mat-dialog-title",""],["appearance","fill"],["formControlName","clientType"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","type","email","formControlName","email"],["matInput","","type","password","formControlName","password"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(n,r){1&n&&e.YNc(0,U,29,7,"form",0),2&n&&e.Q6J("ngIf",r.elementForm)},directives:[g.O5,m._Y,m.JL,m.sg,u.uh,u.xY,c.KE,c.hX,F.gD,m.JJ,m.u,g.sg,T.ey,c.TO,Z.Nt,m.Fj,u.H8,x.lW],styles:[".container[_ngcontent-%COMP%]{margin:4vh auto;display:flex;flex-direction:column;align-items:center;min-height:78.3vh}"]}),t})();var M=l(6526);const L=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:3,vars:0,consts:[["content","Login","btn","home","btnUrl",""]],template:function(n,r){1&n&&e._UZ(0,"app-header",0)(1,"app-content")(2,"app-footer")},directives:[d.G,Y,M.c],styles:[""]}),t})()}];let w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[a.Bz.forChild(L)],a.Bz]}),t})();var Q=l(4764);let b=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[w,Q.m]]}),t})()}}]);